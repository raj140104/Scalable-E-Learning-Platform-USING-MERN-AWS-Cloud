{"ast":null,"code":"import{toast}from\"react-hot-toast\";import{setUser}from\"../../slices/profileSlice\";import{apiConnector}from\"../apiconnector\";import{settingsEndpoints}from\"../apis\";import{logout}from\"./authAPI\";const{UPDATE_DISPLAY_PICTURE_API,UPDATE_PROFILE_API,CHANGE_PASSWORD_API,DELETE_PROFILE_API}=settingsEndpoints;export function updateDisplayPicture(token,formData){return async dispatch=>{const toastId=toast.loading(\"Loading...\");try{const response=await apiConnector(\"PUT\",UPDATE_DISPLAY_PICTURE_API,formData,{\"Content-Type\":\"multipart/form-data\",Authorization:`Bearer ${token}`});console.log(\"UPDATE_DISPLAY_PICTURE_API API RESPONSE............\",response);if(!response.data.success){throw new Error(response.data.message);}toast.success(\"Display Picture Updated Successfully\");dispatch(setUser(response.data.data));}catch(error){console.log(\"UPDATE_DISPLAY_PICTURE_API API ERROR............\",error);toast.error(\"Could Not Update Display Picture\");}toast.dismiss(toastId);};}export function updateProfile(token,formData){return async dispatch=>{const toastId=toast.loading(\"Loading...\");try{const response=await apiConnector(\"PUT\",UPDATE_PROFILE_API,formData,{Authorization:`Bearer ${token}`});console.log(\"UPDATE_PROFILE_API API RESPONSE............\",response);if(!response.data.success){throw new Error(response.data.message);}const userImage=response.data.updatedUserDetails.image?response.data.updatedUserDetails.image:`https://api.dicebear.com/5.x/initials/svg?seed=${response.data.updatedUserDetails.firstName} ${response.data.updatedUserDetails.lastName}`;dispatch(setUser({...response.data.updatedUserDetails,image:userImage}));toast.success(\"Profile Updated Successfully\");}catch(error){console.log(\"UPDATE_PROFILE_API API ERROR............\",error);toast.error(\"Could Not Update Profile\");}toast.dismiss(toastId);};}export async function changePassword(token,formData){const toastId=toast.loading(\"Loading...\");try{const response=await apiConnector(\"POST\",CHANGE_PASSWORD_API,formData,{Authorization:`Bearer ${token}`});console.log(\"CHANGE_PASSWORD_API API RESPONSE............\",response);if(!response.data.success){throw new Error(response.data.message);}toast.success(\"Password Changed Successfully\");}catch(error){console.log(\"CHANGE_PASSWORD_API API ERROR............\",error);toast.error(error.response.data.message);}toast.dismiss(toastId);}export function deleteProfile(token,navigate){return async dispatch=>{const toastId=toast.loading(\"Loading...\");try{const response=await apiConnector(\"DELETE\",DELETE_PROFILE_API,null,{Authorization:`Bearer ${token}`});console.log(\"DELETE_PROFILE_API API RESPONSE............\",response);if(!response.data.success){throw new Error(response.data.message);}toast.success(\"Profile Deleted Successfully\");dispatch(logout(navigate));}catch(error){console.log(\"DELETE_PROFILE_API API ERROR............\",error);toast.error(\"Could Not Delete Profile\");}toast.dismiss(toastId);};}","map":{"version":3,"names":["toast","setUser","apiConnector","settingsEndpoints","logout","UPDATE_DISPLAY_PICTURE_API","UPDATE_PROFILE_API","CHANGE_PASSWORD_API","DELETE_PROFILE_API","updateDisplayPicture","token","formData","dispatch","toastId","loading","response","Authorization","console","log","data","success","Error","message","error","dismiss","updateProfile","userImage","updatedUserDetails","image","firstName","lastName","changePassword","deleteProfile","navigate"],"sources":["C:/Users/rites/Downloads/7th sem/7th Sem Project/Study-pilot/Study-pilot/src/services/operations/SettingsAPI.js"],"sourcesContent":["import { toast } from \"react-hot-toast\"\n\nimport { setUser } from \"../../slices/profileSlice\"\nimport { apiConnector } from \"../apiconnector\"\nimport { settingsEndpoints } from \"../apis\"\nimport { logout } from \"./authAPI\"\n\nconst {\n  UPDATE_DISPLAY_PICTURE_API,\n  UPDATE_PROFILE_API,\n  CHANGE_PASSWORD_API,\n  DELETE_PROFILE_API,\n} = settingsEndpoints\n\nexport function updateDisplayPicture(token, formData) {\n  return async (dispatch) => {\n    const toastId = toast.loading(\"Loading...\")\n    try {\n      const response = await apiConnector(\n        \"PUT\",\n        UPDATE_DISPLAY_PICTURE_API,\n        formData,\n        {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: `Bearer ${token}`,\n        }\n      )\n      console.log(\n        \"UPDATE_DISPLAY_PICTURE_API API RESPONSE............\",\n        response\n      )\n\n      if (!response.data.success) {\n        throw new Error(response.data.message)\n      }\n      toast.success(\"Display Picture Updated Successfully\")\n      dispatch(setUser(response.data.data))\n    } catch (error) {\n      console.log(\"UPDATE_DISPLAY_PICTURE_API API ERROR............\", error)\n      toast.error(\"Could Not Update Display Picture\")\n    }\n    toast.dismiss(toastId)\n  }\n}\n\nexport function updateProfile(token, formData) {\n  return async (dispatch) => {\n    const toastId = toast.loading(\"Loading...\")\n    try {\n      const response = await apiConnector(\"PUT\", UPDATE_PROFILE_API, formData, {\n        Authorization: `Bearer ${token}`,\n      })\n      console.log(\"UPDATE_PROFILE_API API RESPONSE............\", response)\n\n      if (!response.data.success) {\n        throw new Error(response.data.message)\n      }\n      const userImage = response.data.updatedUserDetails.image\n        ? response.data.updatedUserDetails.image\n        : `https://api.dicebear.com/5.x/initials/svg?seed=${response.data.updatedUserDetails.firstName} ${response.data.updatedUserDetails.lastName}`\n      dispatch(\n        setUser({ ...response.data.updatedUserDetails, image: userImage })\n      )\n      toast.success(\"Profile Updated Successfully\")\n    } catch (error) {\n      console.log(\"UPDATE_PROFILE_API API ERROR............\", error)\n      toast.error(\"Could Not Update Profile\")\n    }\n    toast.dismiss(toastId)\n  }\n}\n\nexport async function changePassword(token, formData) {\n  const toastId = toast.loading(\"Loading...\")\n  try {\n    const response = await apiConnector(\"POST\", CHANGE_PASSWORD_API, formData, {\n      Authorization: `Bearer ${token}`,\n    })\n    console.log(\"CHANGE_PASSWORD_API API RESPONSE............\", response)\n\n    if (!response.data.success) {\n      throw new Error(response.data.message)\n    }\n    toast.success(\"Password Changed Successfully\")\n  } catch (error) {\n    console.log(\"CHANGE_PASSWORD_API API ERROR............\", error)\n    toast.error(error.response.data.message)\n  }\n  toast.dismiss(toastId)\n}\n\nexport function deleteProfile(token, navigate) {\n  return async (dispatch) => {\n    const toastId = toast.loading(\"Loading...\")\n    try {\n      const response = await apiConnector(\"DELETE\", DELETE_PROFILE_API, null, {\n        Authorization: `Bearer ${token}`,\n      })\n      console.log(\"DELETE_PROFILE_API API RESPONSE............\", response)\n\n      if (!response.data.success) {\n        throw new Error(response.data.message)\n      }\n      toast.success(\"Profile Deleted Successfully\")\n      dispatch(logout(navigate))\n    } catch (error) {\n      console.log(\"DELETE_PROFILE_API API ERROR............\", error)\n      toast.error(\"Could Not Delete Profile\")\n    }\n    toast.dismiss(toastId)\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}