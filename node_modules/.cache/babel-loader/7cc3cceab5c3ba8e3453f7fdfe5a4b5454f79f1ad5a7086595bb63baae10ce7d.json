{"ast":null,"code":"import{createSlice}from\"@reduxjs/toolkit\";import{toast}from\"react-hot-toast\";const initialState={cart:localStorage.getItem(\"cart\")?JSON.parse(localStorage.getItem(\"cart\")):[],total:localStorage.getItem(\"total\")?JSON.parse(localStorage.getItem(\"total\")):0,totalItems:localStorage.getItem(\"totalItems\")?JSON.parse(localStorage.getItem(\"totalItems\")):0};const cartSlice=createSlice({name:\"cart\",initialState,reducers:{addToCart:(state,action)=>{const course=action.payload;const index=state.cart.findIndex(item=>item._id===course._id);if(index>=0){// If the course is already in the cart, do not modify the quantity\ntoast.error(\"Course already in cart\");return;}// If the course is not in the cart, add it to the cart\nstate.cart.push(course);// Update the total quantity and price\nstate.totalItems++;state.total+=course.price;// Update to localstorage\nlocalStorage.setItem(\"cart\",JSON.stringify(state.cart));localStorage.setItem(\"total\",JSON.stringify(state.total));localStorage.setItem(\"totalItems\",JSON.stringify(state.totalItems));// show toast\ntoast.success(\"Course added to cart\");},removeFromCart:(state,action)=>{const courseId=action.payload;const index=state.cart.findIndex(item=>item._id===courseId);if(index>=0){// If the course is found in the cart, remove it\nstate.totalItems--;state.total-=state.cart[index].price;state.cart.splice(index,1);// Update to localstorage\nlocalStorage.setItem(\"cart\",JSON.stringify(state.cart));localStorage.setItem(\"total\",JSON.stringify(state.total));localStorage.setItem(\"totalItems\",JSON.stringify(state.totalItems));// show toast\ntoast.success(\"Course removed from cart\");}},resetCart:state=>{state.cart=[];state.total=0;state.totalItems=0;// Update to localstorage\nlocalStorage.removeItem(\"cart\");localStorage.removeItem(\"total\");localStorage.removeItem(\"totalItems\");}}});export const{addToCart,removeFromCart,resetCart}=cartSlice.actions;export default cartSlice.reducer;","map":{"version":3,"names":["createSlice","toast","initialState","cart","localStorage","getItem","JSON","parse","total","totalItems","cartSlice","name","reducers","addToCart","state","action","course","payload","index","findIndex","item","_id","error","push","price","setItem","stringify","success","removeFromCart","courseId","splice","resetCart","removeItem","actions","reducer"],"sources":["C:/Users/rites/Downloads/7th sem/7th Sem Project/Study-pilot/Study-pilot/src/slices/cartSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\"\nimport { toast } from \"react-hot-toast\"\n\nconst initialState = {\n  cart: localStorage.getItem(\"cart\")\n    ? JSON.parse(localStorage.getItem(\"cart\"))\n    : [],\n  total: localStorage.getItem(\"total\")\n    ? JSON.parse(localStorage.getItem(\"total\"))\n    : 0,\n  totalItems: localStorage.getItem(\"totalItems\")\n    ? JSON.parse(localStorage.getItem(\"totalItems\"))\n    : 0,\n}\n\nconst cartSlice = createSlice({\n  name: \"cart\",\n  initialState,\n  reducers: {\n    addToCart: (state, action) => {\n      const course = action.payload\n      const index = state.cart.findIndex((item) => item._id === course._id)\n\n      if (index >= 0) {\n        // If the course is already in the cart, do not modify the quantity\n        toast.error(\"Course already in cart\")\n        return\n      }\n      // If the course is not in the cart, add it to the cart\n      state.cart.push(course)\n      // Update the total quantity and price\n      state.totalItems++\n      state.total += course.price\n      // Update to localstorage\n      localStorage.setItem(\"cart\", JSON.stringify(state.cart))\n      localStorage.setItem(\"total\", JSON.stringify(state.total))\n      localStorage.setItem(\"totalItems\", JSON.stringify(state.totalItems))\n      // show toast\n      toast.success(\"Course added to cart\")\n    },\n    removeFromCart: (state, action) => {\n      const courseId = action.payload\n      const index = state.cart.findIndex((item) => item._id === courseId)\n\n      if (index >= 0) {\n        // If the course is found in the cart, remove it\n        state.totalItems--\n        state.total -= state.cart[index].price\n        state.cart.splice(index, 1)\n        // Update to localstorage\n        localStorage.setItem(\"cart\", JSON.stringify(state.cart))\n        localStorage.setItem(\"total\", JSON.stringify(state.total))\n        localStorage.setItem(\"totalItems\", JSON.stringify(state.totalItems))\n        // show toast\n        toast.success(\"Course removed from cart\")\n      }\n    },\n    resetCart: (state) => {\n      state.cart = []\n      state.total = 0\n      state.totalItems = 0\n      // Update to localstorage\n      localStorage.removeItem(\"cart\")\n      localStorage.removeItem(\"total\")\n      localStorage.removeItem(\"totalItems\")\n    },\n  },\n})\n\nexport const { addToCart, removeFromCart, resetCart } = cartSlice.actions\n\nexport default cartSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}